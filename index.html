<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kuis IPA, IPS & B. Indonesia - Putzz V11 üå∫</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #fff, #ffd6eb);
    color: #333;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
  }
  .container {
    background: rgba(255,255,255,0.95);
    border-radius: 20px;
    padding: 30px;
    width: 90%;
    max-width: 900px;
    box-shadow: 0 10px 30px rgba(255,105,180,0.3);
    animation: fadeIn 1s ease-in-out;
  }
  h1 {
    text-align: center;
    background: linear-gradient(90deg,#ff69b4,#ff1493);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 28px;
    margin-bottom: 20px;
  }
  input[type="text"] {
    width: 100%;
    padding: 12px;
    border: 2px solid #ffb6c1;
    border-radius: 10px;
    margin-bottom: 18px;
    font-size: 16px;
    background: #fff;
  }
  .question { margin-bottom: 10px; }
  label {
    display: block;
    background: #ffe4ef;
    padding: 10px;
    margin: 6px 0;
    border-radius: 10px;
    border: 1px solid #ffcce0;
    cursor: pointer;
    transition: 0.2s;
  }
  label:hover { background: #ffccdc; transform: translateY(-2px); }
  input[type="radio"] { margin-right: 8px; }
  .btn {
    display: block;
    margin: 15px auto;
    padding: 12px 25px;
    border: none;
    border-radius: 10px;
    color: white;
    background: linear-gradient(90deg,#ff69b4,#ff1493);
    cursor: pointer;
    font-size: 16px;
    box-shadow: 0 0 15px rgba(255,105,180,0.5);
    transition: 0.3s;
  }
  .btn:hover { box-shadow: 0 0 25px rgba(255,105,180,0.7); transform: translateY(-2px); }
  .btn-danger { background: linear-gradient(90deg,#ff5c8d,#ff1c5e); }
  #result, #history { text-align:center; margin-top: 18px; }
  #history {
    background: #fff0f6;
    padding: 12px;
    border-radius: 15px;
    margin-top: 20px;
    border: 1px solid #ffd6eb;
  }
  ul { list-style: none; padding: 0; margin: 0; }
  li { padding: 6px 0; border-bottom: 1px solid #ffe4ef; }

  /* Loading progress bar */
  .loading-box { text-align:center; padding:10px; }
  .progress-bar {
    width: 80%;
    height: 10px;
    background: #ffe1f0;
    border-radius: 10px;
    margin: 15px auto;
    overflow: hidden;
  }
  .progress-fill {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg,#ff69b4,#ff1493);
    border-radius: 10px;
    transition: width 0.4s ease;
  }
  .loading-text {
    font-size:16px;
    color:#ff1493;
    margin-top:6px;
  }
  .small-note { font-size:12px; text-align:center; margin-top:8px; color:#555; }
  @keyframes fadeIn { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }
</style>
</head>
<body>

<div class="container">
  <h1>Kuis IPA, IPS & B. Indonesia - Putzz V11 üíñ</h1>
  <input type="text" id="studentName" placeholder="Masukkan nama kamu..." />
  <form id="quizForm"></form>
  <button class="btn" onclick="submitQuiz()">Selesai</button>
  <button class="btn btn-danger" onclick="resetProtected()">Reset Nilai (_)</button>
  <div class="small-note">Token Di simpan di DATABASE üîí</div>
  <div id="result"></div>

  <div id="history">
    <h3>üìã Daftar Nilai Peserta</h3>
    <ul id="scoreList"></ul>
  </div>
</div>

<script>
const RAW_PW_URL = "https://raw.githubusercontent.com/PutzzXD12/kuis-nilai/refs/heads/main/pw_reset.json";

const quizData = [
  {q:"1. Teks yang menceritakan pengalaman disebut ...",o:["Teks deskripsi","Teks narasi","Teks laporan","Teks eksposisi"],a:1},
  {q:"2. Sinonim kata 'indah' adalah ...",o:["Cantik","Buruk","Jelek","Kusam"],a:0},
  {q:"3. Antonim kata 'besar' adalah ...",o:["Kecil","Tinggi","Panjang","Pendek"],a:0},
  {q:"4. Planet yang terdekat dari matahari adalah ...",o:["Venus","Merkurius","Bumi","Mars"],a:1},
  {q:"5. Hewan yang berkembang biak dengan bertelur disebut ...",o:["Vivipar","Ovipar","Ovovivipar","Herbivor"],a:1},
  {q:"6. Pahlawan wanita dari Aceh yang terkenal adalah ...",o:["R.A. Kartini","Cut Nyak Dien","Martha Christina","Dewi Sartika"],a:1},
  {q:"7. Ibukota provinsi Jawa Timur adalah ...",o:["Surabaya","Malang","Madiun","Kediri"],a:0},
  {q:"8. Perubahan wujud dari padat menjadi cair disebut ...",o:["Mencair","Membeku","Menguap","Menyublim"],a:0},
  {q:"9. Proklamasi kemerdekaan Indonesia dibacakan pada tanggal ...",o:["17 Agustus 1945","10 November 1945","1 Juni 1945","20 Mei 1945"],a:0},
  {q:"10. Energi yang dihasilkan oleh matahari disebut energi ...",o:["Panas","Cahaya","Listrik","Kimia"],a:1},
  {q:"11. Tag HTML untuk membuat tautan adalah ...",o:["<link>","<a>","<p>","<h1>"],a:1},
  {q:"12. CSS digunakan untuk ...",o:["Membuat struktur web","Mengatur tampilan web","Menyimpan data","Menjalankan server"],a:1},
  {q:"13. Nama presiden pertama Indonesia adalah ...",o:["Soekarno","Soeharto","Habibie","Megawati"],a:0},
  {q:"14. Gas yang dibutuhkan tumbuhan untuk fotosintesis adalah ...",o:["Oksigen","Karbon dioksida","Nitrogen","Hidrogen"],a:1},
  {q:"15. Alat untuk mengukur suhu adalah ...",o:["Termometer","Barometer","Higrometer","Altimeter"],a:0},
  {q:"16. Hewan pemakan tumbuhan disebut ...",o:["Herbivora","Karnivora","Omnivora","Insektivora"],a:0},
  {q:"17. Teks yang menjelaskan cara melakukan sesuatu adalah ...",o:["Eksposisi","Prosedur","Narasi","Laporan"],a:1},
  {q:"18. Ibu kota negara Jepang adalah ...",o:["Tokyo","Seoul","Beijing","Bangkok"],a:0},
  {q:"19. Bunyi dapat merambat melalui ...",o:["Udara","Hampa udara","Cahaya","Ruang kosong"],a:0},
  {q:"20. Warna primer terdiri dari ...",o:["Merah, kuning, biru","Hijau, ungu, oranye","Hitam, putih, abu","Merah, putih, biru"],a:0},
  {q:"21. Nama alat musik yang dipukul adalah ...",o:["Gitar","Piano","Drum","Seruling"],a:2},
  {q:"22. Kalimat ajakan biasanya menggunakan kata ...",o:["Ayo","Karena","Namun","Tetapi"],a:0},
  {q:"23. Hewan langka khas Papua adalah ...",o:["Komodo","Cendrawasih","Badak Jawa","Gajah"],a:1},
  {q:"24. Sila ketiga Pancasila berbunyi ...",o:["Persatuan Indonesia","Kemanusiaan yang adil","Ketuhanan Yang Maha Esa","Keadilan sosial"],a:0},
  {q:"25. Proses penguapan air di tumbuhan disebut ...",o:["Transpirasi","Fotosintesis","Respirasi","Kondensasi"],a:0},
  {q:"26. Tag HTML untuk paragraf adalah ...",o:["<text>","<p>","<div>","<body>"],a:1},
  {q:"27. Dalam sistem tata surya, planet terbesar adalah ...",o:["Saturnus","Jupiter","Neptunus","Mars"],a:1},
  {q:"28. Tokoh yang dikenal sebagai Bapak Pendidikan Nasional adalah ...",o:["Ki Hajar Dewantara","Soekarno","Moh. Hatta","Ahmad Dahlan"],a:0},
  {q:"29. Hewan pemakan daging disebut ...",o:["Karnivora","Herbivora","Omnivora","Frugivora"],a:0},
  {q:"30. Arti kata ‚Äòekonomi‚Äô adalah ...",o:["Aturan rumah tangga","Ilmu sosial","Ilmu bumi","Kegiatan jual beli"],a:0}
];

const form = document.getElementById("quizForm");
quizData.forEach((item, i) => {
  const div = document.createElement("div");
  div.classList.add("question");
  const qHtml = `<h3>${item.q}</h3>`;
  const optionsHtml = item.o.map((opt, idx) => {
    const letter = String.fromCharCode(65 + idx);
    return `<label><input type="radio" name="q${i}" value="${idx}" /> <strong>${letter}.</strong> ${opt}</label>`;
  }).join("");
  div.innerHTML = qHtml + optionsHtml;
  form.appendChild(div);
});

function submitQuiz(){
  const name = document.getElementById("studentName").value.trim();
  if(!name){ alert("Masukkan nama terlebih dahulu!"); return; }
  let score = 0;
  quizData.forEach((item, i) => {
    const sel = document.querySelector(`input[name='q${i}']:checked`);
    if(sel && Number(sel.value) === item.a) score++;
  });
  const results = JSON.parse(localStorage.getItem("quiz_results") || "[]");
  results.push({ name, score, time: new Date().toISOString() });
  localStorage.setItem("quiz_results", JSON.stringify(results));
  document.getElementById("result").innerHTML =
    `Nama: <b>${name}</b><br>Nilai: <b>${score}/${quizData.length}</b> (${Math.round(score/quizData.length*100)}%)`;
  alert("‚úÖ Kuis selesai! Nilai kamu tersimpan.");
  tampilkanDaftarNilai();
}

async function resetProtected(){
  const attempt = prompt("Masukkan password untuk reset data:");
  if(attempt === null) return;

  document.getElementById("result").innerHTML = `
    <div class='loading-box'>
      <div class='progress-bar'><div id='barFill' class='progress-fill'></div></div>
      <div id='loadText' class='loading-text'>üîì Mengambil data dari GitHub... 0%</div>
    </div>
  `;

  let bar = document.getElementById("barFill");
  let txt = document.getElementById("loadText");

  const steps = [0, 30, 80, 90, 100];
  for (let i = 0; i < steps.length; i++) {
    bar.style.width = steps[i] + "%";
    txt.textContent = `üîì Mengambil data dari GitHub... ${steps[i]}%`;
    await new Promise(r => setTimeout(r, 500));
  }

  txt.textContent = "‚úÖ Selesai memuat data!";

  try {
    const res = await fetch(RAW_PW_URL + "?_=" + Date.now(), { cache: "no-store" });
    const data = await res.json();
    if (attempt.trim() === data.reset_password) {
      localStorage.removeItem("quiz_results");
      tampilkanDaftarNilai();
      document.getElementById("result").innerHTML = "üßπ Semua data nilai berhasil dihapus!";
      alert("‚úÖ Berhasil mengambil DATABASE token");
    } else {
      alert("‚ùå gagal mengambil DATABASE token ");
      document.getElementById("result").innerHTML = "üîí Akses ditolak.";
    }
  } catch {
    alert("‚ö†Ô∏è Gagal konek ke GitHub!");
  }
}

function tampilkanDaftarNilai(){
  const list = document.getElementById("scoreList");
  list.innerHTML = "";
  const results = JSON.parse(localStorage.getItem("quiz_results") || "[]");
  if(results.length === 0){
    list.innerHTML = "<li>Belum ada peserta yang mengerjakan.</li>";
    return;
  }
  results.forEach((r, i) => {
    const pct = Math.round((r.score / quizData.length) * 100);
    list.innerHTML += `<li>${i+1}. <b>${r.name}</b> ‚Äî ${r.score}/${quizData.length} (${pct}%)</li>`;
  });
}
tampilkanDaftarNilai();
</script>
</body>
</html>